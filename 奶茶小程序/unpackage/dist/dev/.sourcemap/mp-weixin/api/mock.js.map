{"version":3,"file":"mock.js","sources":["api/mock.js"],"sourcesContent":["// 模拟数据源\nconst MockDB = {\n    user: {\n        id: 1,\n        username: \"user001\",\n        nickname: \"奶茶达人\",\n        avatar: \"https://api.dicebear.com/7.x/notionists/svg?seed=Felix\",\n        level: 2, // 0:普通, 1:黄金, 2:钻石\n        levelName: \"钻石会员\",\n        points: 1250,\n        balance: 58.00,\n        coupons: 3,\n        couponList: [\n            { id: 1, type: 'discount', value: 0.8, name: '8折优惠券', desc: '全场通用，最高抵扣20元', minAmount: 0 },\n            { id: 2, type: 'cash', value: 5, name: '5元代金券', desc: '满30元可用', minAmount: 30 },\n            { id: 3, type: 'cash', value: 10, name: '10元新人券', desc: '无门槛', minAmount: 0 }\n        ]\n    },\n    categories: [\n        { id: 'c1', name: '人气必喝' },\n        { id: 'c2', name: '鲜果茶' },\n        { id: 'c3', name: '纯茶' },\n        { id: 'c4', name: '咖啡' }\n    ],\n    products: [\n        { \n            id: 'p1', catId: 'c1', name: '烤黑糖波波牛乳', desc: '每日现煮黑糖波波，浓郁牛乳', price: 19, \n            image: 'https://images.unsplash.com/photo-1576092768241-dec231844f66?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80',\n            specs: [\n                { name: '温度', options: ['正常冰', '少冰', '去冰', '热'] },\n                { name: '糖度', options: ['标准糖', '七分糖', '三分糖', '不另加糖'] }\n            ]\n        },\n        { \n            id: 'p2', catId: 'c1', name: '多肉葡萄冻', desc: '手剥新鲜葡萄，清爽茶底', price: 28, \n            image: 'https://images.unsplash.com/photo-1623592576505-18b62569e578?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80',\n            specs: [\n                { name: '温度', options: ['正常冰', '少冰'] },\n                { name: '糖度', options: ['标准糖', '少糖'] }\n            ]\n        },\n        { id: 'p3', catId: 'c2', name: '满杯红柚', desc: '满满维C，清爽解腻', price: 22, image: 'https://images.unsplash.com/photo-1546173159-315724a31696?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80', specs: [{ name: '糖度', options: ['标准', '半糖'] }] },\n        { id: 'p4', catId: 'c3', name: '高山四季春', desc: '清新回甘，高山原叶', price: 12, image: 'https://images.unsplash.com/photo-1627435601361-ec25f5b1d0e5?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80', specs: [{ name: '温度', options: ['冰', '热'] }] }\n    ],\n    addresses: [\n        { id: 1, name: '张三', phone: '138****0000', location: '腾讯大厦', detail: '20楼前台', tag: '公司' },\n        { id: 2, name: '张三', phone: '138****0000', location: '万象天地', detail: 'A座302', tag: '家' }\n    ],\n    banners: [\n        { img: 'https://images.unsplash.com/photo-1563823253396-8d6c4c969324?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80' },\n        { img: 'https://images.unsplash.com/photo-1497534446932-c925b458314e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80' },\n        { img: 'https://images.unsplash.com/photo-1556679343-c7306c1976bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80' }\n    ],\n    stores: [\n        { id: 1, name: '云顶奶茶 (科技园店)', address: '南山区科技园南区W1-B栋', distance: '1.2km', status: '营业中' },\n        { id: 2, name: '云顶奶茶 (万象天地店)', address: '南山区深南大道9668号', distance: '3.5km', status: '营业中' },\n        { id: 3, name: '云顶奶茶 (海岸城店)', address: '南山区文心五路33号', distance: '5.8km', status: '营业中' },\n        { id: 4, name: '云顶奶茶 (世界之窗店)', address: '南山区深南大道9028号', distance: '4.2km', status: '休息中' }\n    ],\n    hotSearches: [\n        '波波', '葡萄', '红柚', '四季春', '奶茶', '咖啡', '新品', '优惠'\n    ]\n};\n\n// 模拟 API\nexport const api = {\n    getBanners: () => Promise.resolve(MockDB.banners),\n    getCategories: () => Promise.resolve(MockDB.categories),\n    getProducts: () => Promise.resolve(MockDB.products),\n    getUserInfo: () => Promise.resolve(MockDB.user),\n    getAddresses: () => Promise.resolve(MockDB.addresses),\n    getStores: () => Promise.resolve(MockDB.stores),\n    getHotSearches: () => Promise.resolve(MockDB.hotSearches),\n    \n    // 模拟登录\n    login: (username, password) => {\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                if (username) {\n                    resolve(MockDB.user);\n                } else {\n                    reject('用户名不能为空');\n                }\n            }, 500);\n        });\n    },\n\n    // 模拟提交订单\n    submitOrder: (orderData) => {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                const now = Date.now();\n                const isPickup = orderData.orderType === 'pickup';\n                \n                resolve({\n                    id: 'OD' + now,\n                    ...orderData,\n                    status: 0, // 0: 待接单\n                    statusText: '待接单',\n                    createTime: now,\n                    // Pickup specific fields\n                    pickupCode: isPickup ? Math.floor(Math.random() * 9000) + 1000 : null,\n                    estimatedTime: now + (isPickup ? 15 * 60000 : 30 * 60000), // +15min or +30min\n                    counterNo: isPickup ? 'A' + Math.floor(Math.random() * 10) : null,\n                    storeAddress: isPickup ? (orderData.store ? orderData.store.address : '南山区科技园南区W1-B栋') : null,\n                    // Delivery specific fields\n                    riderName: !isPickup ? '李骑手' : null,\n                    riderPhone: !isPickup ? '13800138000' : null,\n                    deliveryStatus: !isPickup ? 'waiting_rider' : null // waiting_rider, delivering, arrived\n                });\n            }, 1000);\n        });\n    },\n\n    // 获取历史订单 (模拟数据)\n    getOrders: () => {\n        return Promise.resolve([\n            {\n                id: 'OD_HIST_1',\n                orderType: 'pickup',\n                status: 3,\n                statusText: '已完成',\n                createTime: Date.now() - 86400000,\n                finalAmount: 28.00,\n                totalCount: 1,\n                items: [{ name: '多肉葡萄冻', price: 28, qty: 1 }],\n                storeAddress: '南山区科技园南区W1-B栋',\n                storeName: '云顶奶茶 (科技园店)',\n                pickupCode: 1001\n            },\n            {\n                id: 'OD_REJ_1',\n                orderType: 'delivery',\n                status: 4,\n                statusText: '商家拒单',\n                createTime: Date.now() - 172800000,\n                finalAmount: 52.00,\n                totalCount: 2,\n                items: [{ name: '烤黑糖波波牛乳', price: 19, qty: 1 }, { name: '满杯红柚', price: 22, qty: 1 }],\n                address: { location: '腾讯大厦', detail: '20楼' },\n                storeName: '云顶奶茶 (智慧云店)',\n                rejectReason: '超出配送范围'\n            }\n        ]);\n    },\n\n    // 保存地址 (新增或更新)\n    saveAddress: (addr) => {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                if (addr.id) {\n                    // Update\n                    const index = MockDB.addresses.findIndex(a => a.id === addr.id);\n                    if (index !== -1) {\n                        MockDB.addresses[index] = { ...addr };\n                    }\n                } else {\n                    // Create\n                    MockDB.addresses.push({\n                        id: Date.now(),\n                        ...addr\n                    });\n                }\n                resolve(true);\n            }, 500);\n        });\n    },\n\n    // 充值\n    recharge: (amount, bonus) => {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                const current = parseFloat(MockDB.user.balance);\n                const addAmount = parseFloat(amount);\n                const addBonus = parseFloat(bonus);\n                MockDB.user.balance = parseFloat((current + addAmount + addBonus).toFixed(2));\n                resolve(MockDB.user.balance);\n            }, 1000);\n        });\n    },\n    \n    // 更新用户信息 (模拟)\n    updateUserInfo: (data) => {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                MockDB.user = { ...MockDB.user, ...data };\n                resolve(MockDB.user);\n            }, 500);\n        });\n    }\n};\n"],"names":[],"mappings":"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"}