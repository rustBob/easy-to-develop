{"version":3,"file":"order-detail.js","sources":["pages/order-detail/order-detail.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvb3JkZXItZGV0YWlsL29yZGVyLWRldGFpbC52dWU"],"sourcesContent":["<template>\n  <view class=\"container\" v-if=\"order\">\n    <!-- Status Header -->\n    <view class=\"status-header\" :class=\"order.orderType\">\n      <view class=\"status-text\">{{ order.statusText }}</view>\n      \n      <!-- Status Description -->\n      <view class=\"status-desc\" v-if=\"order.status === 2\">\n          {{ order.orderType === 'pickup' ? 'é¥®å“åˆ¶ä½œä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…' : 'å•†å®¶å·²æ¥å•ï¼Œæ­£åœ¨ä¸ºæ‚¨åˆ¶ä½œ' }}\n      </view>\n      <view class=\"status-desc\" v-if=\"order.status === 3\">\n          {{ order.orderType === 'pickup' ? 'é¥®å“å·²åˆ¶ä½œå®Œæˆï¼Œè¯·å‰å¾€å–é¤' : 'éª‘æ‰‹å·²æ¥å•ï¼Œæ­£åœ¨é…é€ä¸­' }}\n      </view>\n      <view class=\"status-desc\" v-if=\"order.status === 4\">è®¢å•å·²å®Œæˆï¼ŒæœŸå¾…å†æ¬¡å…‰ä¸´</view>\n      \n      <!-- Pickup Info -->\n      <view class=\"pickup-code-box\" v-if=\"order.orderType === 'pickup' && (order.status === 2 || order.status === 3)\">\n          <text class=\"label\">å–é¤ç </text>\n          <text class=\"code\">{{ order.pickupCode }}</text>\n          <button v-if=\"order.status === 2\" class=\"action-btn\" @click=\"confirmArrival\">æˆ‘å·²åˆ°è¾¾</button>\n      </view>\n\n      <!-- Delivery Info -->\n      <view class=\"delivery-status-box\" v-if=\"order.orderType === 'delivery' && (order.status === 2 || order.status === 3)\">\n          <view class=\"time-box\">\n              <text class=\"label\">é¢„è®¡é€è¾¾</text>\n              <text class=\"time\">{{ formatTime(order.estimatedTime) }}</text>\n          </view>\n          <view class=\"rider-box\" v-if=\"order.riderName\">\n              <view class=\"rider-info\">\n                  <text class=\"name\">ææ˜</text>\n                  <text class=\"tag\">é…é€å‘˜</text>\n              </view>\n              <view class=\"contact-btn\" @click=\"contactRider\">\n                  <text class=\"icon\">ğŸ“</text> è”ç³»éª‘æ‰‹\n              </view>\n          </view>\n      </view>\n    </view>\n\n    <!-- Product List -->\n    <view class=\"card\">\n      <view class=\"shop-name\">{{ order.storeName || (order.store ? order.store.name : 'äº‘é¡¶å¥¶èŒ¶') }}</view>\n      <view class=\"product-list\">\n        <view v-for=\"item in order.orderItems\" :key=\"item.cartId\" class=\"product-item\">\n          <image :src=\"item.image\" mode=\"aspectFill\" class=\"prod-img\" />\n          <view class=\"prod-info\">\n            <view class=\"name-row\">\n              <text class=\"name\">{{ item.name }}</text>\n              <text class=\"price\">Â¥{{ item.price }}</text>\n            </view>\n            <view class=\"specs-row\">\n              <text class=\"specs\">{{ item.specs }}</text>\n              <text class=\"qty\">x{{ item.drinksQuantity }}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n      \n      <!-- Price Details -->\n      <view class=\"price-details\">\n        <view class=\"row\" v-if=\"order.levelDiscountAmount > 0\">\n            <text class=\"label\">ä¼šå‘˜æŠ˜æ‰£</text>\n            <text class=\"value highlight\">-Â¥{{ order.levelDiscountAmount }}</text>\n        </view>\n        <view class=\"row\" v-if=\"order.couponDiscountAmount > 0\">\n            <text class=\"label\">ä¼˜æƒ åˆ¸æŠµæ‰£</text>\n            <text class=\"value highlight\">-Â¥{{ order.couponDiscountAmount }}</text>\n        </view>\n        <view class=\"row\" v-if=\"!order.levelDiscountAmount && !order.couponDiscountAmount && order.discountAmount > 0\">\n            <text class=\"label\">ä¼˜æƒ æŠ˜æ‰£</text>\n            <text class=\"value highlight\">-Â¥{{ order.discountAmount }}</text>\n        </view>\n        <view class=\"row\" v-if=\"order.pointsDeduction > 0\">\n            <text class=\"label\">ç§¯åˆ†æŠµæ‰£</text>\n            <text class=\"value highlight\">-Â¥{{ order.pointsDeduction }}</text>\n        </view>\n        <view class=\"row total-row\">\n            <text class=\"label\">å®ä»˜</text>\n            <text class=\"total-price\">Â¥{{ order.finalAmount }}</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- Order Info -->\n    <view class=\"card\">\n        <view class=\"info-row\">\n            <text class=\"label\">è®¢å•ç¼–å·</text>\n            <text class=\"value\">{{ order.id }}</text>\n        </view>\n        <view class=\"info-row\">\n            <text class=\"label\">ä¸‹å•æ—¶é—´</text>\n            <text class=\"value\">{{ formatDate(order.createTime) }}</text>\n        </view>\n        <view class=\"info-row\">\n            <text class=\"label\">è·å¾—ç§¯åˆ†</text>\n            <text class=\"value\">{{ Math.floor(order.finalAmount) }} ç§¯åˆ†</text>\n        </view>\n        <view class=\"info-row\" v-if=\"order.remarks\">\n            <text class=\"label\">è®¢å•å¤‡æ³¨</text>\n            <text class=\"value\">{{ order.remarks }}</text>\n        </view>\n    </view>\n\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\nimport { useOrderStore } from '@/store/order';\n\nconst orderStore = useOrderStore();\nconst order = ref(null);\n\nonLoad((options) => {\n    if (options.id) {\n        order.value = orderStore.orders.find(o => o.id === options.id);\n    }\n});\n\nconst formatDate = (timestamp) => {\n  return new Date(timestamp).toLocaleString();\n};\n\nconst formatTime = (timestamp) => {\n    if (!timestamp) return '';\n    const date = new Date(Number(timestamp));\n    if (isNaN(date.getTime())) return '';\n    return date.getHours().toString().padStart(2, '0') + ':' + date.getMinutes().toString().padStart(2, '0');\n};\n\nconst contactRider = () => {\n    uni.makePhoneCall({ phoneNumber: '13800138000' });\n};\n\nconst confirmArrival = () => {\n    uni.showToast({ title: 'å·²é€šçŸ¥åº—å‘˜', icon: 'none' });\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  min-height: 100vh;\n  background-color: #f8f8f8;\n  padding: 30rpx;\n  box-sizing: border-box;\n}\n\n.status-header {\n    padding: 40rpx 0;\n    text-align: center;\n    border-bottom: 20rpx solid #f8f8f8;\n    background: #fff;\n    margin: -30rpx -30rpx 30rpx -30rpx;\n    \n    &.pickup {\n        background: linear-gradient(to bottom, #f6ffed, #fff);\n    }\n    \n    &.delivery {\n        background: linear-gradient(to bottom, #e6f7ff, #fff);\n    }\n    \n    .status-text {\n        font-size: 40rpx;\n        font-weight: bold;\n        color: #333;\n        margin-bottom: 10rpx;\n    }\n    \n    .status-desc {\n        font-size: 24rpx;\n        color: #666;\n    }\n}\n\n.pickup-code-box {\n    margin-top: 30rpx;\n    background: #fff;\n    padding: 30rpx;\n    border-radius: 16rpx;\n    display: inline-flex;\n    flex-direction: column;\n    align-items: center;\n    box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.05);\n    min-width: 300rpx;\n    \n    .label {\n        font-size: 24rpx;\n        color: #999;\n        margin-bottom: 10rpx;\n    }\n    \n    .code {\n        font-size: 60rpx;\n        font-weight: bold;\n        color: #333;\n        font-family: monospace;\n        letter-spacing: 4rpx;\n        margin-bottom: 10rpx;\n    }\n    \n    .counter {\n        font-size: 24rpx;\n        color: #666;\n        margin-bottom: 20rpx;\n    }\n    \n    .action-btn {\n        background: #52c41a;\n        color: #fff;\n        font-size: 28rpx;\n        border-radius: 40rpx;\n        padding: 0 40rpx;\n        line-height: 60rpx;\n    }\n}\n\n.delivery-status-box {\n    margin-top: 30rpx;\n    width: 600rpx;\n    margin-left: auto;\n    margin-right: auto;\n    \n    .time-box {\n        margin-bottom: 30rpx;\n        \n        .label { font-size: 24rpx; color: #999; display: block; margin-bottom: 8rpx; }\n        .time { font-size: 48rpx; font-weight: bold; color: #1890ff; }\n    }\n    \n    .rider-box {\n        background: #fff;\n        padding: 20rpx 30rpx;\n        border-radius: 50rpx;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.05);\n        border: 1px solid #e6f7ff;\n        \n        .rider-info {\n            display: flex;\n            align-items: center;\n            \n            .name { font-size: 28rpx; font-weight: bold; color: #333; margin-right: 12rpx; }\n            .tag { font-size: 20rpx; color: #1890ff; background: #e6f7ff; padding: 2rpx 8rpx; border-radius: 4rpx; }\n        }\n        \n        .contact-btn {\n            display: flex;\n            align-items: center;\n            font-size: 26rpx;\n            color: #333;\n            \n            .icon { margin-right: 8rpx; }\n        }\n    }\n}\n\n.card {\n    background: #fff;\n    border-radius: 16rpx;\n    padding: 30rpx;\n    margin-bottom: 24rpx;\n}\n\n.shop-name {\n    font-size: 28rpx;\n    color: #666;\n    padding-bottom: 20rpx;\n    border-bottom: 1px solid #f5f5f5;\n    margin-bottom: 20rpx;\n}\n\n.product-item {\n    display: flex;\n    margin-bottom: 30rpx;\n    \n    .prod-img {\n        width: 100rpx;\n        height: 100rpx;\n        border-radius: 8rpx;\n        background: #f5f5f5;\n        margin-right: 20rpx;\n    }\n    \n    .prod-info {\n        flex: 1;\n        \n        .name-row {\n            display: flex;\n            justify-content: space-between;\n            margin-bottom: 8rpx;\n            \n            .name { font-size: 28rpx; font-weight: bold; color: #333; }\n            .price { font-size: 28rpx; font-weight: bold; }\n        }\n        \n        .specs-row {\n            display: flex;\n            justify-content: space-between;\n            color: #999;\n            font-size: 24rpx;\n        }\n    }\n}\n\n.price-details {\n    border-top: 1px dashed #f5f5f5;\n    padding-top: 20rpx;\n    \n    .row {\n        display: flex;\n        justify-content: space-between;\n        margin-bottom: 10rpx;\n        font-size: 26rpx;\n        color: #666;\n        \n        .highlight { color: #ff6600; }\n        \n        &.total-row {\n            margin-top: 20rpx;\n            align-items: center;\n            \n            .label { font-size: 28rpx; color: #333; }\n            .total-price { font-size: 36rpx; font-weight: bold; color: #333; }\n        }\n    }\n}\n\n.info-row {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 20rpx;\n    font-size: 26rpx;\n    \n    .label { color: #999; }\n    .value { color: #333; }\n    \n    .value-col {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-end;\n        text-align: right;\n        max-width: 70%;\n        \n        .sub-info { font-size: 22rpx; color: #999; margin-top: 4rpx; }\n    }\n    \n    &:last-child { margin-bottom: 0; }\n}\n</style>\n","import MiniProgramPage from 'E:/vue/å¥¶èŒ¶å°ç¨‹åº/pages/order-detail/order-detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["useOrderStore","ref","onLoad","uni"],"mappings":";;;;;;AAgHA,UAAM,aAAaA,YAAa,cAAA;AAChC,UAAM,QAAQC,cAAAA,IAAI,IAAI;AAEtBC,kBAAM,OAAC,CAAC,YAAY;AAChB,UAAI,QAAQ,IAAI;AACZ,cAAM,QAAQ,WAAW,OAAO,KAAK,OAAK,EAAE,OAAO,QAAQ,EAAE;AAAA,MAChE;AAAA,IACL,CAAC;AAED,UAAM,aAAa,CAAC,cAAc;AAChC,aAAO,IAAI,KAAK,SAAS,EAAE,eAAc;AAAA,IAC3C;AAEA,UAAM,aAAa,CAAC,cAAc;AAC9B,UAAI,CAAC;AAAW,eAAO;AACvB,YAAM,OAAO,IAAI,KAAK,OAAO,SAAS,CAAC;AACvC,UAAI,MAAM,KAAK,QAAO,CAAE;AAAG,eAAO;AAClC,aAAO,KAAK,WAAW,SAAU,EAAC,SAAS,GAAG,GAAG,IAAI,MAAM,KAAK,WAAU,EAAG,SAAQ,EAAG,SAAS,GAAG,GAAG;AAAA,IAC3G;AAEA,UAAM,eAAe,MAAM;AACvBC,oBAAAA,MAAI,cAAc,EAAE,aAAa,cAAe,CAAA;AAAA,IACpD;AAEA,UAAM,iBAAiB,MAAM;AACzBA,oBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAAA,IAClD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzIA,GAAG,WAAW,eAAe;"}