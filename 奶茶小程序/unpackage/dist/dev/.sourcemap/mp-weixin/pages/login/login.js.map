{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\n  <view class=\"login-container\">\n    <view class=\"login-box\">\n      <text class=\"title\">{{ isRegister ? '注册账号' : '欢迎回来' }}</text>\n      \n      <view class=\"form\">\n        <input class=\"input\" v-model=\"form.username\" placeholder=\"用户名/手机号\" />\n        <input v-if=\"isRegister\" class=\"input\" v-model=\"form.nickname\" placeholder=\"昵称\" />\n        <input class=\"input\" v-model=\"form.password\" type=\"password\" placeholder=\"密码\" />\n        \n        <button class=\"login-btn\" @click=\"handleSubmit\">{{ isRegister ? '注册' : '登录' }}</button>\n        \n        <view class=\"toggle-box\">\n            <text class=\"toggle-text\" @click=\"toggleMode\">\n                {{ isRegister ? '已有账号？去登录' : '没有账号？去注册' }}\n            </text>\n        </view>\n\n        <text class=\"skip-btn\" @click=\"goBack\">暂不登录</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { reactive, ref } from 'vue';\nimport { useUserStore } from '@/store/user';\n\nconst userStore = useUserStore();\nconst form = reactive({ username: '', password: '', nickname: '' });\nconst isRegister = ref(false);\n\nconst goBack = () => {\n  uni.navigateBack();\n};\n\nconst toggleMode = () => {\n    isRegister.value = !isRegister.value;\n    form.username = '';\n    form.password = '';\n    form.nickname = '';\n};\n\nconst handleSubmit = async () => {\n  if (!form.username) {\n      uni.showToast({ title: '请输入用户名', icon: 'none' });\n      return;\n  }\n  if (!form.password) {\n      uni.showToast({ title: '请输入密码', icon: 'none' });\n      return;\n  }\n  \n  if (isRegister.value) {\n      if (!form.nickname) {\n          uni.showToast({ title: '请输入昵称', icon: 'none' });\n          return;\n      }\n      try {\n          await userStore.register(form.username, form.password, form.nickname);\n          uni.showToast({ title: '注册成功，请登录' });\n          isRegister.value = false;\n      } catch (e) {\n          uni.showToast({ title: '注册失败', icon: 'none' });\n      }\n  } else {\n      try {\n          await userStore.login(form.username, form.password);\n          uni.navigateBack();\n          uni.showToast({ title: '登录成功' });\n      } catch (e) {\n          uni.showToast({ title: '登录失败', icon: 'none' });\n      }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.login-container {\n  min-height: 100vh;\n  background: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 40rpx;\n}\n\n.login-box {\n  width: 100%;\n  max-width: 600rpx;\n  margin-top: -200rpx; // Shift up slightly\n}\n\n.title {\n  font-size: 48rpx;\n  font-weight: bold;\n  text-align: center;\n  margin-bottom: 60rpx;\n  display: block;\n  color: #333;\n}\n\n.input {\n  background: #f9f9f9;\n  border: 1px solid #eee;\n  padding: 24rpx;\n  border-radius: 12rpx;\n  margin-bottom: 20rpx;\n  font-size: 28rpx;\n  height: 88rpx;\n}\n\n.login-btn {\n  background: #333;\n  color: #fff;\n  border-radius: 12rpx;\n  padding: 24rpx 0;\n  font-weight: bold;\n  margin-top: 20rpx;\n  font-size: 30rpx;\n}\n\n.toggle-box {\n    margin-top: 30rpx;\n    text-align: center;\n    \n    .toggle-text {\n        font-size: 28rpx;\n        color: #ff6600;\n    }\n}\n\n.skip-btn {\n  display: block;\n  text-align: center;\n  color: #999;\n  font-size: 26rpx;\n  margin-top: 30rpx;\n}\n</style>","import MiniProgramPage from 'E:/vue/奶茶小程序/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","reactive","ref","uni"],"mappings":";;;;;;AA4BA,UAAM,YAAYA,WAAY,aAAA;AAC9B,UAAM,OAAOC,cAAAA,SAAS,EAAE,UAAU,IAAI,UAAU,IAAI,UAAU,GAAE,CAAE;AAClE,UAAM,aAAaC,cAAAA,IAAI,KAAK;AAE5B,UAAM,SAAS,MAAM;AACnBC,oBAAG,MAAC,aAAY;AAAA,IAClB;AAEA,UAAM,aAAa,MAAM;AACrB,iBAAW,QAAQ,CAAC,WAAW;AAC/B,WAAK,WAAW;AAChB,WAAK,WAAW;AAChB,WAAK,WAAW;AAAA,IACpB;AAEA,UAAM,eAAe,YAAY;AAC/B,UAAI,CAAC,KAAK,UAAU;AAChBA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,OAAM,CAAE;AAC/C;AAAA,MACH;AACD,UAAI,CAAC,KAAK,UAAU;AAChBA,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAC9C;AAAA,MACH;AAED,UAAI,WAAW,OAAO;AAClB,YAAI,CAAC,KAAK,UAAU;AAChBA,wBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAC9C;AAAA,QACH;AACD,YAAI;AACA,gBAAM,UAAU,SAAS,KAAK,UAAU,KAAK,UAAU,KAAK,QAAQ;AACpEA,wBAAAA,MAAI,UAAU,EAAE,OAAO,WAAY,CAAA;AACnC,qBAAW,QAAQ;AAAA,QACtB,SAAQ,GAAG;AACRA,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAM,CAAE;AAAA,QAChD;AAAA,MACP,OAAS;AACH,YAAI;AACA,gBAAM,UAAU,MAAM,KAAK,UAAU,KAAK,QAAQ;AAClDA,wBAAG,MAAC,aAAY;AAChBA,wBAAAA,MAAI,UAAU,EAAE,OAAO,OAAQ,CAAA;AAAA,QAClC,SAAQ,GAAG;AACRA,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAM,CAAE;AAAA,QAChD;AAAA,MACJ;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;ACzEA,GAAG,WAAW,eAAe;"}