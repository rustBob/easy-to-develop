{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- Navbar -->\n    <view class=\"nav-bar\">\n      <text class=\"nav-title\">‰∫ëÈ°∂Â•∂Ëå∂</text>\n    </view>\n\n    <scroll-view scroll-y class=\"content\">\n      <!-- Banner -->\n      <view class=\"banner-box\">\n        <swiper class=\"swiper\" circular autoplay interval=\"5000\" indicator-dots indicator-active-color=\"#fff\">\n          <swiper-item v-for=\"(b, i) in banners\" :key=\"i\">\n            <image :src=\"b.img\" mode=\"aspectFill\" class=\"banner-img\" />\n          </swiper-item>\n        </swiper>\n        <view class=\"activity-tag\">\n          <view class=\"dot\"></view>\n          <text>Á≤æÂìÅ‰ºòÊÉ†</text>\n        </view>\n      </view>\n\n      <!-- Quick Entry -->\n      <view class=\"quick-entry\">\n        <view class=\"entry-card\" @click=\"toMenu('pickup')\">\n          <view class=\"text-group\">\n            <text class=\"title\">Èó®Â∫óËá™Âèñ</text>\n            <text class=\"sub\">‰∏ãÂçïÂÖçÊéíÈòü</text>\n          </view>\n          <text class=\"icon\">üè¨</text>\n        </view>\n        <view class=\"entry-card\" @click=\"toMenu('delivery')\">\n          <view class=\"text-group\">\n            <text class=\"title\">Â§ñÂçñÈÖçÈÄÅ</text>\n            <text class=\"sub\">Êó†Êé•Ëß¶ÈÖçÈÄÅ</text>\n          </view>\n          <text class=\"icon\">üõµ</text>\n        </view>\n      </view>\n\n      <!-- Recommendations -->\n      <view class=\"section\" v-if=\"recommendations.length > 0\">\n        <view class=\"section-header\">\n          <text class=\"title\">Áåú‰Ω†ÂñúÊ¨¢</text>\n          <text class=\"sub\">Ê†πÊçÆÊúÄËøëÁÇπÂçïÊé®Ëçê</text>\n        </view>\n        <scroll-view scroll-x class=\"recommend-scroll\">\n          <view class=\"recommend-list\">\n            <view v-for=\"item in recommendations\" :key=\"item.id\" class=\"recommend-item\" @click=\"openProduct(item)\">\n              <image :src=\"item.image\" mode=\"aspectFill\" class=\"prod-img\" />\n              <text class=\"prod-name\">{{ item.name }}</text>\n              <text class=\"prod-price\">¬•{{ item.price }}</text>\n            </view>\n          </view>\n        </scroll-view>\n      </view>\n    </scroll-view>\n\n    <ProductDetail \n      v-model:visible=\"showDetail\" \n      :product=\"selectedProduct\" \n      @add-to-cart=\"handleAddToCart\"\n    />\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue';\nimport { onShow } from '@dcloudio/uni-app';\nimport { useCartStore } from '@/store/cart';\nimport { globalApi } from '@/api/globalApi';\nimport ProductDetail from '@/components/ProductDetail.vue';\n\nconst cartStore = useCartStore();\n\nconst banners = ref([]);\nconst products = ref([]);\nconst showDetail = ref(false);\nconst selectedProduct = ref(null);\n\nconst recommendations = computed(() => {\n    if (products.value.length <= 3) return products.value;\n    // Simple random shuffle and slice\n    const shuffled = [...products.value].sort(() => 0.5 - Math.random());\n    return shuffled.slice(0, 3);\n});\n\nonShow(async () => {\n  globalApi['banners'].get(null, null, (res) => {\n    banners.value = res || [];\n  })\n\n  globalApi['stores'].get(null, null, (res) => {\n    cartStore.setStore(res[0]);\n    globalApi['drinks'].get(null, { storeId: res[0].id }, (res) => {\n      products.value = res || [];\n    }, (err) => {\n      uni.showToast({ title: err.msg || 'Ëé∑ÂèñÂïÜÂìÅÂ§±Ë¥•', icon: 'none' });\n    });\n  }, (err) => {\n    uni.showToast({ title: err.msg || 'Ëé∑ÂèñÈó®Â∫óÂ§±Ë¥•', icon: 'none' });\n  });\n});\n\nconst toProfile = () => uni.switchTab({ url: '/pages/profile/profile' });\nconst toMenu = (type) => {\n    cartStore.setOrderType(type || 'pickup');\n    uni.switchTab({ url: '/pages/menu/menu' });\n};\n\nconst openProduct = (prod) => {\n  selectedProduct.value = prod;\n  showDetail.value = true;\n};\n\nconst handleAddToCart = (data) => {\n  cartStore.addToCart(data.product, data.specs, data.qty);\n  uni.showToast({ title: 'Â∑≤Âä†ÂÖ•Ë¥≠Áâ©Ë¢ã', icon: 'none' });\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  min-height: 100vh;\n  background-color: #f8f8f8;\n  display: flex;\n  flex-direction: column;\n}\n\n.nav-bar {\n  background: #fff;\n  padding: 80rpx 30rpx 20rpx; // Status bar padding\n  display: flex;\n  align-items: center;\n  \n  .nav-title {\n    font-size: 36rpx;\n    font-weight: bold;\n  }\n}\n\n.content {\n  flex: 1;\n  padding: 30rpx;\n  box-sizing: border-box;\n}\n\n.banner-box {\n  position: relative;\n  border-radius: 24rpx;\n  overflow: hidden;\n  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.1);\n  margin-bottom: 30rpx;\n  \n  .swiper {\n    height: 380rpx;\n    width: 100%;\n  }\n  \n  .banner-img {\n    width: 100%;\n    height: 100%;\n  }\n  \n  .activity-tag {\n    position: absolute;\n    top: 20rpx;\n    right: 20rpx;\n    background: rgba(255, 255, 255, 0.9);\n    padding: 8rpx 20rpx;\n    border-radius: 30rpx;\n    display: flex;\n    align-items: center;\n    color: #ff6600;\n    font-size: 24rpx;\n    font-weight: bold;\n    \n    .dot {\n      width: 12rpx;\n      height: 12rpx;\n      background: red;\n      border-radius: 50%;\n      margin-right: 8rpx;\n    }\n  }\n}\n\n.section {\n  margin-bottom: 30rpx;\n  \n  .section-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: baseline;\n    margin-bottom: 20rpx;\n    \n    .title { font-size: 32rpx; font-weight: bold; color: #333; }\n    .sub { font-size: 22rpx; color: #999; }\n  }\n}\n\n.recommend-scroll {\n  white-space: nowrap;\n  width: 100%;\n}\n\n.recommend-list {\n  display: flex;\n  gap: 20rpx;\n}\n\n.recommend-item {\n  width: 220rpx;\n  background: #fff;\n  border-radius: 16rpx;\n  padding: 16rpx;\n  display: inline-block;\n  box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);\n  \n  .prod-img {\n    width: 100%;\n    height: 180rpx;\n    border-radius: 12rpx;\n    margin-bottom: 12rpx;\n  }\n  \n  .prod-name {\n    font-size: 26rpx;\n    font-weight: bold;\n    color: #333;\n    display: block;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  \n  .prod-price {\n    font-size: 24rpx;\n    color: #ff6600;\n    font-weight: bold;\n  }\n}\n\n.quick-entry {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20rpx;\n  margin-bottom: 40rpx;\n  \n  .entry-card {\n    background: #fff;\n    padding: 30rpx;\n    border-radius: 24rpx;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);\n    \n    .title { font-size: 30rpx; font-weight: bold; display: block; }\n    .sub { font-size: 22rpx; color: #999; }\n    .icon { font-size: 48rpx; opacity: 0.8; }\n  }\n}\n</style>\n","import MiniProgramPage from 'E:/vue/Â•∂Ëå∂Â∞èÁ®ãÂ∫è/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useCartStore","ref","computed","onShow","globalApi","res","uni"],"mappings":";;;;;;;AAsEA,MAAM,gBAAgB,MAAW;;;;AAEjC,UAAM,YAAYA,WAAY,aAAA;AAE9B,UAAM,UAAUC,cAAAA,IAAI,CAAA,CAAE;AACtB,UAAM,WAAWA,cAAAA,IAAI,CAAA,CAAE;AACvB,UAAM,aAAaA,cAAAA,IAAI,KAAK;AAC5B,UAAM,kBAAkBA,cAAAA,IAAI,IAAI;AAEhC,UAAM,kBAAkBC,cAAQ,SAAC,MAAM;AACnC,UAAI,SAAS,MAAM,UAAU;AAAG,eAAO,SAAS;AAEhD,YAAM,WAAW,CAAC,GAAG,SAAS,KAAK,EAAE,KAAK,MAAM,MAAM,KAAK,OAAM,CAAE;AACnE,aAAO,SAAS,MAAM,GAAG,CAAC;AAAA,IAC9B,CAAC;AAEDC,kBAAAA,OAAO,YAAY;AACjBC,0BAAS,UAAC,SAAS,EAAE,IAAI,MAAM,MAAM,CAAC,QAAQ;AAC5C,gBAAQ,QAAQ,OAAO;MAC3B,CAAG;AAEDA,0BAAS,UAAC,QAAQ,EAAE,IAAI,MAAM,MAAM,CAAC,QAAQ;AAC3C,kBAAU,SAAS,IAAI,CAAC,CAAC;AACzBA,4BAAAA,UAAU,QAAQ,EAAE,IAAI,MAAM,EAAE,SAAS,IAAI,CAAC,EAAE,GAAI,GAAE,CAACC,SAAQ;AAC7D,mBAAS,QAAQA,QAAO;QACzB,GAAE,CAAC,QAAQ;AACVC,8BAAI,UAAU,EAAE,OAAO,IAAI,OAAO,UAAU,MAAM,OAAM,CAAE;AAAA,QAChE,CAAK;AAAA,MACF,GAAE,CAAC,QAAQ;AACVA,4BAAI,UAAU,EAAE,OAAO,IAAI,OAAO,UAAU,MAAM,OAAM,CAAE;AAAA,MAC9D,CAAG;AAAA,IACH,CAAC;AAGD,UAAM,SAAS,CAAC,SAAS;AACrB,gBAAU,aAAa,QAAQ,QAAQ;AACvCA,oBAAAA,MAAI,UAAU,EAAE,KAAK,mBAAoB,CAAA;AAAA,IAC7C;AAEA,UAAM,cAAc,CAAC,SAAS;AAC5B,sBAAgB,QAAQ;AACxB,iBAAW,QAAQ;AAAA,IACrB;AAEA,UAAM,kBAAkB,CAAC,SAAS;AAChC,gBAAU,UAAU,KAAK,SAAS,KAAK,OAAO,KAAK,GAAG;AACtDA,oBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,OAAM,CAAE;AAAA,IACjD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpHA,GAAG,WAAW,eAAe;"}