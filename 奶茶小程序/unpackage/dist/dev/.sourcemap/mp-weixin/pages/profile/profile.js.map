{"version":3,"file":"profile.js","sources":["pages/profile/profile.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9wcm9maWxlLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- Header Background -->\n    <view class=\"header-bg\"></view>\n    \n    <view class=\"content\">\n      <!-- User Card -->\n      <view class=\"user-card\" @click=\"toProfileEdit\">\n        <view class=\"avatar-wrap\">\n          <image \n            :src=\"userStore.isLoggedIn ? userStore.userInfo.avatar : '/static/logo.png'\" \n            class=\"avatar\"\n            mode=\"aspectFill\"\n          />\n        </view>\n        \n        <view class=\"user-info\">\n          <block v-if=\"userStore.isLoggedIn\">\n            <text class=\"nickname\">{{ userStore.userInfo.nickname }}</text>\n            <text class=\"card-no\">‰ºöÂëòÂç°Âè∑: {{ userStore.userInfo.cardId }}</text>\n          </block>\n          <block v-else>\n            <text class=\"nickname\" @click.stop=\"toLogin\">ÁÇπÂáªÁôªÂΩï/Ê≥®ÂÜå</text>\n            <text class=\"card-no\">ÁôªÂΩï‰∫´Âèó‰ºöÂëòÊùÉÁõä</text>\n          </block>\n        </view>\n        <image v-if=\"userStore.isLoggedIn\" src=\"/static/enter-arrow.png\" class=\"arrow-right\" />\n      </view>\n\n      <!-- Member Rights Card -->\n      <view class=\"member-rights-card\" v-if=\"userStore.isLoggedIn\">\n        <view class=\"rights-header\">\n            <text class=\"level-title\">{{ userStore.userInfo.levelName }}</text>\n            <text class=\"expiry\">ÊúâÊïàÊúüËá≥ 2025-12-31</text>\n        </view>\n        <view class=\"rights-list\">\n            <view class=\"right-item\">\n                <text class=\"icon\">üëë</text>\n                <text class=\"name\">Á≠âÁ∫ßÊäòÊâ£</text>\n                <text class=\"desc\">{{ getLevelDiscountText(userStore.userInfo.level) }}</text>\n            </view>\n            <view class=\"right-item\">\n                <text class=\"icon\">üéÅ</text>\n                <text class=\"name\">ÁîüÊó•Á§ºÂåÖ</text>\n                <text class=\"desc\">‰∏ì‰∫´Â•ΩÁ§º</text>\n            </view>\n            <view class=\"right-item\">\n                <text class=\"icon\">üöÄ</text>\n                <text class=\"name\">ÊûÅÈÄüÁÇπÂçï</text>\n                <text class=\"desc\">‰ºòÂÖàÂà∂‰Ωú</text>\n            </view>\n        </view>\n        \n        <!-- Level Rules -->\n        <view class=\"level-rules\">\n            <view class=\"rule-item\" :class=\"{active: userStore.userInfo.level === 0}\">\n                <text class=\"lvl\">ÊôÆÈÄö</text>\n                <text class=\"benefit\">Êó†ÊäòÊâ£</text>\n            </view>\n             <view class=\"rule-item\" :class=\"{active: userStore.userInfo.level === 1}\">\n                <text class=\"lvl\">ÈªÑÈáë</text>\n                <text class=\"benefit\">9.5Êäò</text>\n            </view>\n             <view class=\"rule-item\" :class=\"{active: userStore.userInfo.level === 2}\">\n                <text class=\"lvl\">ÈíªÁü≥</text>\n                <text class=\"benefit\">9Êäò</text>\n            </view>\n        </view>\n      </view>\n      \n      <!-- Assets -->\n      <view class=\"assets-card\">\n        <view class=\"asset-item\" @click=\"toCoupons\">\n          <text class=\"num\">{{ userStore.userInfo.coupons || 0 }}</text>\n          <text class=\"label\">‰ºòÊÉ†Âà∏</text>\n        </view>\n        <view class=\"asset-item\">\n          <text class=\"num\">{{ userStore.userInfo.points || 0 }}</text>\n          <text class=\"label\">ÁßØÂàÜ</text>\n        </view>\n        <view class=\"asset-item\" @click=\"toRecharge\">\n          <text class=\"num\">{{ userStore.userInfo.balance || '0.00' }}</text>\n          <text class=\"label\">‰ΩôÈ¢ù</text>\n        </view>\n      </view>\n      \n      <!-- Menu List -->\n      <view class=\"menu-list\">\n        <!-- Daily Share Button -->\n        <button class=\"menu-item share-btn\" open-type=\"share\" v-if=\"userStore.isLoggedIn\">\n          <view class=\"left\">\n            <text class=\"icon\">üéÅ</text>\n            <text class=\"text\">ÊØèÊó•ÂàÜ‰∫´</text>\n            <text class=\"tag\" v-if=\"!userStore.hasSharedToday\">È¢Ü5ÂÖÉÂà∏</text>\n          </view>\n          <view class=\"right\">\n            <text class=\"tip\" v-if=\"userStore.hasSharedToday\">Â∑≤È¢ÜÂèñ</text>\n            <image src=\"/static/enter-arrow.png\" class=\"arrow\" />\n          </view>\n        </button>\n\n        <view class=\"menu-item\" @click=\"toAddress\">\n          <view class=\"left\">\n            <text class=\"icon\" style=\"color:#1890ff\">üìç</text>\n            <text class=\"text\">Âú∞ÂùÄÁÆ°ÁêÜ</text>\n          </view>\n          <image src=\"/static/enter-arrow.png\" class=\"arrow\" />\n        </view>\n        <view class=\"menu-item\">\n          <view class=\"left\">\n            <text class=\"icon\" style=\"color:#52c41a\">üéß</text>\n            <text class=\"text\">ËÅîÁ≥ªÂÆ¢Êúç</text>\n          </view>\n          <image src=\"/static/enter-arrow.png\" class=\"arrow\" />\n        </view>\n      </view>\n      \n      <!-- Logout Button -->\n    <button v-if=\"userStore.isLoggedIn\" class=\"logout-btn\" @click=\"handleLogout\">ÈÄÄÂá∫ÁôªÂΩï</button>\n    \n    <!-- Delete Account Button -->\n    <view v-if=\"userStore.isLoggedIn\" class=\"delete-account-wrap\" @click=\"handleDeleteAccount\">\n        <text class=\"text\">Ê≥®ÈîÄË¥¶Âè∑</text>\n    </view>\n  </view>\n  \n</view>\n</template>\n\n<script setup>\nimport { useUserStore } from '@/store/user';\nimport { onShareAppMessage } from '@dcloudio/uni-app';\n\nconst userStore = useUserStore();\n\nonShareAppMessage(() => {\n    // Simulate reward\n    if (!userStore.hasSharedToday) {\n        setTimeout(() => {\n            userStore.receiveShareCoupon();\n            uni.showToast({ title: 'ÂàÜ‰∫´ÊàêÂäüÔºå‰ºòÊÉ†Âà∏Â∑≤Âà∞Ë¥¶', icon: 'none' });\n        }, 2000);\n    }\n\n    return {\n        title: '‰∫ëÈ°∂Â•∂Ëå∂ÔºåÈÇÄÊÇ®ÂÖ±‰∫´ÁæéÂë≥',\n        path: '/pages/index/index',\n        imageUrl: 'https://api.dicebear.com/7.x/food/svg?seed=Tea'\n    };\n});\n\nconst toCoupons = () => uni.navigateTo({ url: '/pages/coupons/coupons' });\nconst toRecharge = () => uni.navigateTo({ url: '/pages/recharge/recharge' });\nconst toLogin = () => uni.navigateTo({ url: '/pages/login/login' });\nconst toProfileEdit = () => {\n    if (userStore.isLoggedIn) {\n        uni.navigateTo({ url: '/pages/profile-edit/profile-edit' });\n    }\n};\nconst toAddress = () => {\n    if (userStore.isLoggedIn) {\n        uni.navigateTo({ url: '/pages/address/address' });\n    } else {\n        toLogin();\n    }\n};\n\nconst getLevelDiscountText = (level) => {\n    switch(level) {\n        case 1: return 'ÂÖ®Âú∫9.5Êäò';\n        case 2: return 'ÂÖ®Âú∫9Êäò';\n        default: return 'Êó†ÊäòÊâ£';\n    }\n};\n\nconst handleLogout = () => {\n  uni.showModal({\n    title: 'ÊèêÁ§∫',\n    content: 'Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü',\n    success: (res) => {\n      if (res.confirm) {\n        userStore.logout();\n        uni.showToast({ title: 'Â∑≤ÈÄÄÂá∫' });\n      }\n    }\n  });\n};\n\nconst handleDeleteAccount = () => {\n    uni.showModal({\n        title: 'Âç±Èô©Êìç‰Ωú',\n        content: 'Á°ÆÂÆöË¶ÅÊ≥®ÈîÄË¥¶Âè∑ÂêóÔºüÊ≥®ÈîÄÂêéÊâÄÊúâÊï∞ÊçÆÂ∞ÜÊó†Ê≥ïÊÅ¢Â§çÔºÅ',\n        confirmColor: '#ff4d4f',\n        success: async (res) => {\n            if (res.confirm) {\n                uni.showLoading({ title: 'Â§ÑÁêÜ‰∏≠' });\n                await userStore.deleteAccount();\n                uni.hideLoading();\n            }\n        }\n    });\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  min-height: 100vh;\n  background-color: #f8f8f8;\n}\n\n.header-bg {\n  height: 300rpx;\n  background: #ff6600;\n  border-bottom-left-radius: 40rpx;\n  border-bottom-right-radius: 40rpx;\n}\n\n.content {\n  padding: 0 30rpx;\n  margin-top: -160rpx;\n}\n\n.user-card {\n  background: #fff;\n  border-radius: 20rpx;\n  padding: 40rpx;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.08);\n  margin-bottom: 30rpx;\n  \n  .avatar-wrap {\n    position: relative;\n    margin-right: 30rpx;\n    \n    .avatar {\n      width: 120rpx;\n      height: 120rpx;\n      border-radius: 50%;\n      border: 4rpx solid #fff;\n      background: #eee;\n    }\n  }\n  \n  .user-info {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    \n    .nickname {\n      font-size: 36rpx;\n      font-weight: bold;\n      color: #333;\n      margin-bottom: 10rpx;\n    }\n    \n    .card-no {\n      font-size: 24rpx;\n      color: #999;\n    }\n  }\n  \n  .arrow-right {\n      width: 32rpx;\n      height: 32rpx;\n      opacity: 0.5;\n  }\n}\n\n.member-rights-card {\n  background: linear-gradient(135deg, #333 0%, #1a1a1a 100%);\n  border-radius: 20rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  color: #f1c40f;\n  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.1);\n\n  .rights-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 30rpx;\n      \n      .level-title { font-size: 32rpx; font-weight: bold; }\n      .expiry { font-size: 22rpx; opacity: 0.8; }\n  }\n  \n  .rights-list {\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 30rpx;\n      \n      .right-item {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          \n          .icon { font-size: 40rpx; margin-bottom: 10rpx; }\n          .name { font-size: 24rpx; font-weight: bold; margin-bottom: 6rpx; }\n          .desc { font-size: 20rpx; opacity: 0.7; }\n      }\n  }\n  \n  .level-rules {\n      display: flex;\n      background: rgba(255,255,255,0.1);\n      border-radius: 12rpx;\n      padding: 4rpx;\n      \n      .rule-item {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          padding: 16rpx 0;\n          border-radius: 10rpx;\n          opacity: 0.5;\n          \n          .lvl { font-size: 24rpx; font-weight: bold; margin-bottom: 4rpx; }\n          .benefit { font-size: 20rpx; }\n          \n          &.active {\n              background: #f1c40f;\n              color: #333;\n              opacity: 1;\n              box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.2);\n          }\n      }\n  }\n}\n\n.assets-card {\n  background: #fff;\n  border-radius: 20rpx;\n  padding: 30rpx;\n  display: flex;\n  justify-content: space-around;\n  margin-bottom: 30rpx;\n  box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);\n  \n  .asset-item {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    \n    .num { font-size: 36rpx; font-weight: bold; color: #333; margin-bottom: 8rpx; }\n    .label { font-size: 24rpx; color: #999; }\n  }\n}\n\n.menu-list {\n  background: #fff;\n  border-radius: 20rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);\n  margin-bottom: 40rpx;\n  \n  .menu-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 30rpx;\n    border-bottom: 1px solid #f8f8f8;\n    \n    // Reset button styles\n    &.share-btn {\n        background: #fff;\n        line-height: normal;\n        margin: 0;\n        border-radius: 0;\n        \n        &::after { border: none; }\n    }\n    \n    &:last-child { border-bottom: none; }\n    \n    .left {\n      display: flex;\n      align-items: center;\n      \n      .icon { margin-right: 20rpx; font-size: 36rpx; }\n      .text { font-size: 30rpx; color: #333; }\n      \n      .tag {\n          font-size: 20rpx;\n          color: #fff;\n          background: #ff4d4f;\n          padding: 2rpx 8rpx;\n          border-radius: 8rpx;\n          margin-left: 12rpx;\n      }\n    }\n    \n    .right {\n        display: flex;\n        align-items: center;\n        \n        .tip { font-size: 24rpx; color: #999; margin-right: 10rpx; }\n    }\n    \n    .arrow { width: 32rpx; height: 32rpx; opacity: 0.5; }\n  }\n}\n\n.logout-btn {\n  background: #eee;\n  color: #666;\n  font-size: 30rpx;\n  border: none;\n  border-radius: 16rpx;\n}\n\n.delete-account-wrap {\n    margin-top: 30rpx;\n    text-align: center;\n    padding-bottom: 30rpx;\n    \n    .text {\n        font-size: 24rpx;\n        color: #999;\n        text-decoration: underline;\n    }\n}\n</style>\n","import MiniProgramPage from 'E:/vue/Â•∂Ëå∂Â∞èÁ®ãÂ∫è/pages/profile/profile.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","onShareAppMessage","uni"],"mappings":";;;;;;;AAqIA,UAAA,YAAAA,WAAA,aAAA;AAEAC,kBAAAA,kBAAA,MAAA;AAEA,UAAA,CAAA,UAAA,gBAAA;AACA,mBAAA,MAAA;AACA,oBAAA,mBAAA;AACAC,wBAAA,MAAA,UAAA,EAAA,OAAA,eAAA,MAAA,OAAA,CAAA;AAAA,QACA,GAAA,GAAA;AAAA,MACA;AAEA,aAAA;AAAA,QACA,OAAA;AAAA,QACA,MAAA;AAAA,QACA,UAAA;AAAA,MACA;AAAA,IACA,CAAA;AAEA,UAAA,YAAA,MAAAA,cAAAA,MAAA,WAAA,EAAA,KAAA,yBAAA,CAAA;AACA,UAAA,aAAA,MAAAA,cAAAA,MAAA,WAAA,EAAA,KAAA,2BAAA,CAAA;AACA,UAAA,UAAA,MAAAA,cAAAA,MAAA,WAAA,EAAA,KAAA,qBAAA,CAAA;AACA,UAAA,gBAAA,MAAA;AACA,UAAA,UAAA,YAAA;AACAA,sBAAAA,MAAA,WAAA,EAAA,KAAA,mCAAA,CAAA;AAAA,MACA;AAAA,IACA;AACA,UAAA,YAAA,MAAA;AACA,UAAA,UAAA,YAAA;AACAA,sBAAAA,MAAA,WAAA,EAAA,KAAA,yBAAA,CAAA;AAAA,MACA,OAAA;AACA;MACA;AAAA,IACA;AAEA,UAAA,uBAAA,CAAA,UAAA;AACA,cAAA,OAAA;AAAA,QACA,KAAA;AAAA,iBAAA;AAAA,QACA,KAAA;AAAA,iBAAA;AAAA,QACA;AAAA,iBAAA;AAAA,MACA;AAAA,IACA;AAEA,UAAA,eAAA,MAAA;AACAA,oBAAAA,MAAA,UAAA;AAAA,QACA,OAAA;AAAA,QACA,SAAA;AAAA,QACA,SAAA,CAAA,QAAA;AACA,cAAA,IAAA,SAAA;AACA,sBAAA,OAAA;AACAA,0BAAAA,MAAA,UAAA,EAAA,OAAA,MAAA,CAAA;AAAA,UACA;AAAA,QACA;AAAA,MACA,CAAA;AAAA,IACA;AAEA,UAAA,sBAAA,MAAA;AACAA,oBAAAA,MAAA,UAAA;AAAA,QACA,OAAA;AAAA,QACA,SAAA;AAAA,QACA,cAAA;AAAA,QACA,SAAA,OAAA,QAAA;AACA,cAAA,IAAA,SAAA;AACAA,0BAAAA,MAAA,YAAA,EAAA,OAAA,MAAA,CAAA;AACA,kBAAA,UAAA;AACAA,0BAAA,MAAA,YAAA;AAAA,UACA;AAAA,QACA;AAAA,MACA,CAAA;AAAA,IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxMA,GAAG,WAAW,eAAe;"}