{"version":3,"file":"StoreModal.js","sources":["components/StoreModal.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovdnVlL-WltuiMtuWwj-eoi-W6jy9jb21wb25lbnRzL1N0b3JlTW9kYWwudnVl"],"sourcesContent":["<template>\n  <view v-if=\"visible\" class=\"modal-mask\">\n    <view class=\"modal-content\">\n      <view class=\"modal-header\">\n        <view class=\"back-btn\" @click=\"close\"><image src=\"/static/back-arrow.png\" class=\"back-icon\" /></view>\n        <text class=\"title\">选择门店</text>\n      </view>\n      \n      <scroll-view scroll-y class=\"store-list\">\n        <view v-for=\"store in stores\" :key=\"store.id\" class=\"store-item\" :class=\"{active: selectedId === store.id}\" @click=\"selectStore(store)\">\n          <view class=\"info\">\n            <text class=\"name\">{{ store.name }}</text>\n            <text class=\"address\">{{ store.address }}</text>\n            <view class=\"tags\">\n                <text class=\"distance\">距离 {{ store.distance }}</text>\n                <text class=\"status\" :class=\"{closed: store.status !== '营业中'}\">{{ store.status }}</text>\n            </view>\n          </view>\n          <view class=\"action\">\n              <text class=\"select-btn\" v-if=\"selectedId !== store.id\">去点单</text>\n              <text class=\"current-text\" v-else>当前门店</text>\n          </view>\n        </view>\n      </scroll-view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { globalApi } from '@/api/globalApi';\n\nconst props = defineProps({ \n    visible: Boolean,\n    selectedId: [String, Number]\n});\nconst emit = defineEmits(['update:visible', 'select']);\n\nconst stores = ref([]);\n\nonMounted(async () => {\n    globalApi['stores'].get(null, null, (res) => {\n        stores.value = res || [];\n    }, (err) => {\n        uni.showToast({ title: err.msg || '获取门店失败', icon: 'none' });\n    });\n});\n\nconst close = () => {\n    emit('update:visible', false);\n};\n\nconst selectStore = (store) => {\n    if (store.status !== '营业中') {\n        uni.showToast({ title: '该门店休息中', icon: 'none' });\n        return;\n    }\n    emit('select', store);\n    close();\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #fff;\n  z-index: 900;\n  display: flex;\n  flex-direction: column;\n  padding: 80rpx 30rpx 30rpx;\n}\n\n.modal-header {\n  padding: 20rpx;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid #f5f5f5;\n  height: 88rpx;\n  \n  .back-btn {\n    padding: 0 20rpx;\n    display: flex;\n    align-items: center;\n    \n    .back-icon {\n        width: 40rpx;\n        height: 40rpx;\n    }\n  }\n  \n  .title {\n    font-size: 32rpx;\n    font-weight: bold;\n    margin-left: 20rpx;\n  }\n}\n\n.store-list {\n    flex: 1;\n    padding: 30rpx;\n    background: #f8f8f8;\n}\n\n.store-item {\n    background: #fff;\n    padding: 30rpx;\n    border-radius: 16rpx;\n    margin-bottom: 20rpx;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);\n    border: 2rpx solid transparent; // 预留边框位置，避免抖动\n    \n    .info {\n        flex: 1;\n        margin-right: 20rpx;\n        \n        .name { font-size: 30rpx; font-weight: bold; color: #333; display: block; margin-bottom: 8rpx; }\n        .address { font-size: 24rpx; color: #999; display: block; margin-bottom: 12rpx; }\n        \n        .tags {\n            display: flex;\n            align-items: center;\n            font-size: 22rpx;\n            \n            .distance { color: #666; margin-right: 16rpx; }\n            .status { \n                color: #52c41a; \n                border: 1px solid #52c41a; \n                padding: 0 8rpx; \n                border-radius: 4rpx;\n                \n                &.closed {\n                    color: #999;\n                    border-color: #999;\n                }\n            }\n        }\n    }\n    \n    .select-btn {\n        background: #fff;\n        border: 1px solid #ff6600;\n        color: #ff6600;\n        font-size: 24rpx;\n        padding: 8rpx 20rpx;\n        border-radius: 30rpx;\n    }\n    \n    .current-text {\n        color: #ff6600;\n        font-size: 24rpx;\n        font-weight: bold;\n    }\n    \n    &.active {\n        border-color: #ff6600;\n        background: #fff5e6;\n    }\n}\n</style>","import Component from 'E:/vue/奶茶小程序/components/StoreModal.vue'\nwx.createComponent(Component)"],"names":["ref","onMounted","globalApi","uni"],"mappings":";;;;;;;;;;;;AAoCA,UAAM,OAAO;AAEb,UAAM,SAASA,cAAAA,IAAI,CAAA,CAAE;AAErBC,kBAAAA,UAAU,YAAY;AAClBC,0BAAS,UAAC,QAAQ,EAAE,IAAI,MAAM,MAAM,CAAC,QAAQ;AACzC,eAAO,QAAQ,OAAO;MACzB,GAAE,CAAC,QAAQ;AACRC,4BAAI,UAAU,EAAE,OAAO,IAAI,OAAO,UAAU,MAAM,OAAM,CAAE;AAAA,MAClE,CAAK;AAAA,IACL,CAAC;AAED,UAAM,QAAQ,MAAM;AAChB,WAAK,kBAAkB,KAAK;AAAA,IAChC;AAEA,UAAM,cAAc,CAAC,UAAU;AAC3B,UAAI,MAAM,WAAW,OAAO;AACxBA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,OAAM,CAAE;AAC/C;AAAA,MACH;AACD,WAAK,UAAU,KAAK;AACpB;IACJ;;;;;;;;;;;;;;;;;;;;;;;;;;AC1DA,GAAG,gBAAgB,SAAS;"}