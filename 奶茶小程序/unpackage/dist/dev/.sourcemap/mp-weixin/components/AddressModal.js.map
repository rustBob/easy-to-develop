{"version":3,"file":"AddressModal.js","sources":["components/AddressModal.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovdnVlL-WltuiMtuWwj-eoi-W6jy9jb21wb25lbnRzL0FkZHJlc3NNb2RhbC52dWU"],"sourcesContent":["<template>\n  <view v-if=\"visible\" class=\"modal-mask\">\n    <view class=\"modal-content\">\n      <view class=\"modal-header\">\n        <view class=\"back-btn\" @click=\"handleBack\"><image src=\"/static/back-arrow.png\" class=\"back-icon\" /></view>\n        <text class=\"title\">{{ isEditing ? (editForm.id ? 'ÁºñËæëÂú∞ÂùÄ' : 'Êñ∞Â¢ûÂú∞ÂùÄ') : (mode === 'select' ? 'ÈÄâÊã©Êî∂Ë¥ßÂú∞ÂùÄ' : 'Âú∞ÂùÄÁÆ°ÁêÜ') }}</text>\n      </view>\n      \n      <!-- Address List -->\n      <scroll-view v-if=\"!isEditing\" scroll-y class=\"address-list\">\n        <!-- Mock Map -->\n        <view class=\"map-placeholder\">\n          <text class=\"icon\">üìç</text>\n          <text class=\"text\">ÂΩìÂâçÂÆö‰Ωç: Ê∑±Âú≥Â∏ÇÂçóÂ±±Âå∫ÁßëÊäÄÂõ≠...</text>\n        </view>\n\n        <view v-for=\"addr in addresses\" :key=\"addr.id\" class=\"address-item\" @click=\"selectAddress(addr)\">\n          <view class=\"info\">\n            <view class=\"location\">{{ addr.location }} {{ addr.detail }}</view>\n            <view class=\"contact\">\n                {{ addr.name }} \n                <text class=\"gender\">{{ addr.gender === 0 ? 'ÂÖàÁîü' : 'Â•≥Â£´' }}</text>\n                {{ addr.phone }}\n            </view>\n          </view>\n          <view class=\"actions\">\n            <text v-if=\"addr.tag\" class=\"tag\">{{ addr.tag }}</text>\n            <view class=\"edit-btn\" @click.stop=\"editAddress(addr)\">\n                <text class=\"edit-icon\">‚úé</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"add-btn\" @click=\"addAddress\">\n          <text>+ Êñ∞Â¢ûÂú∞ÂùÄ</text>\n        </view>\n      </scroll-view>\n\n      <!-- Edit Form -->\n      <scroll-view v-else scroll-y class=\"edit-form\">\n        <view class=\"form-group\">\n            <view class=\"form-item\">\n                <text class=\"label\">ËÅîÁ≥ª‰∫∫</text>\n                <input v-model=\"editForm.name\" placeholder=\"ËØ∑Â°´ÂÜôÊî∂Ë¥ß‰∫∫ÂßìÂêç\" class=\"input\"/>\n            </view>\n            <view class=\"form-item\">\n                <text class=\"label\"></text>\n                <view class=\"tags-row\">\n                    <view class=\"radio-tag\" :class=\"{active: editForm.gender === 0}\" @click=\"editForm.gender = 0\">ÂÖàÁîü</view>\n                    <view class=\"radio-tag\" :class=\"{active: editForm.gender === 1}\" @click=\"editForm.gender = 1\">Â•≥Â£´</view>\n                </view>\n            </view>\n            <view class=\"form-item\">\n                <text class=\"label\">ÊâãÊú∫Âè∑</text>\n                <input v-model=\"editForm.phone\" placeholder=\"ËØ∑Â°´ÂÜôÊî∂Ë¥ß‰∫∫ÊâãÊú∫Âè∑\" class=\"input\" type=\"number\" maxlength=\"11\"/>\n            </view>\n            <view class=\"form-item\">\n                <text class=\"label\">Âú∞ÂùÄ</text>\n                <input v-model=\"editForm.location\" placeholder=\"ÁÇπÂáªÈÄâÊã©Êî∂Ë¥ßÂú∞ÂùÄ\" class=\"input\"/>\n                <text class=\"arrow\">></text>\n            </view>\n            <view class=\"form-item\">\n                <text class=\"label\">Èó®ÁâåÂè∑</text>\n                <input v-model=\"editForm.detail\" placeholder=\"‰æãÔºöAÂ∫ß302\" class=\"input\"/>\n            </view>\n            <view class=\"form-item\">\n                <text class=\"label\">Ê†áÁ≠æ</text>\n                <view class=\"tags-row\">\n                    <view v-for=\"tag in ['ÂÆ∂', 'ÂÖ¨Âè∏', 'Â≠¶Ê†°']\" :key=\"tag\" \n                          class=\"radio-tag\" \n                          :class=\"{active: editForm.tag === tag}\" \n                          @click=\"editForm.tag = tag\">\n                        {{ tag }}\n                    </view>\n                </view>\n            </view>\n        </view>\n\n        <button class=\"save-btn\" @click=\"handleSave\">‰øùÂ≠ò</button>\n      </scroll-view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted, watch } from 'vue';\nimport { api } from '@/api/mock';\nimport { globalApi } from '@/api/globalApi';\n\nconst props = defineProps({ \n    visible: Boolean,\n    mode: {\n        type: String,\n        default: 'manage' // manage, select\n    }\n});\nconst emit = defineEmits(['update:visible', 'select']);\n\nconst addresses = ref([]);\nconst isEditing = ref(false);\nconst editForm = reactive({\n    id: null,\n    name: '',\n    gender: 0,\n    phone: '',\n    location: '',\n    detail: '',\n    tag: ''\n});\n\nconst loadAddresses = async () => {\n  globalApi['locations'].get(null, { userId: userStore.user.id }, (res) => {\n    console.log(res);\n    addresses.value = res;\n  }, (err) => {\n    uni.showToast({ title: err.msg || 'Ëé∑ÂèñÂú∞ÂùÄÂ§±Ë¥•', icon: 'none' });\n  });\n};\n\nonMounted(loadAddresses);\n\n// Refresh list when opened\nwatch(() => props.visible, (val) => {\n    if (val) loadAddresses();\n});\n\nconst handleBack = () => {\n    if (isEditing.value) {\n        isEditing.value = false;\n    } else {\n        emit('update:visible', false);\n    }\n};\n\nconst addAddress = () => {\n    Object.assign(editForm, { id: null, name: '', gender: 0, phone: '', location: '', detail: '', tag: '' });\n    isEditing.value = true;\n};\n\nconst editAddress = (addr) => {\n    Object.assign(editForm, addr);\n    isEditing.value = true;\n};\n\nconst selectAddress = (addr) => {\n    console.log('Address clicked:', addr);\n    console.log('Current mode:', props.mode);\n    if (props.mode === 'select') {\n        emit('select', addr);\n        emit('update:visible', false);\n    }\n};\n\nconst handleSave = async () => {\n    if (!editForm.name || !editForm.phone || !editForm.location || !editForm.detail) {\n        uni.showToast({ title: 'ËØ∑Â°´ÂÜôÂÆåÊï¥‰ø°ÊÅØ', icon: 'none' });\n        return;\n    }\n    \n    uni.showLoading({ title: '‰øùÂ≠ò‰∏≠' });\n    await api.saveAddress(editForm);\n    uni.hideLoading();\n    \n    await loadAddresses();\n    isEditing.value = false;\n    uni.showToast({ title: '‰øùÂ≠òÊàêÂäü' });\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #fff;\n  z-index: 999;\n  display: flex;\n  flex-direction: column;\n  padding: 80rpx 30rpx 20rpx;\n}\n\n.modal-content {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    overflow: hidden;\n}\n\n.modal-header {\n  padding: 20rpx;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid #f5f5f5;\n  height: 88rpx;\n  \n  .back-btn {\n    padding: 0 20rpx;\n    display: flex;\n    align-items: center;\n    \n    .back-icon {\n        width: 40rpx;\n        height: 40rpx;\n    }\n  }\n  \n  .title {\n    font-size: 32rpx;\n    font-weight: bold;\n    margin-left: 20rpx;\n  }\n}\n\n.address-list {\n  flex: 1;\n  height: 0; // Fix scroll-view height issue in flex container\n  padding: 30rpx;\n  background: #f5f5f5;\n}\n\n.map-placeholder {\n  height: 200rpx;\n  background: #e6f7ff;\n  border: 2px dashed #91d5ff;\n  border-radius: 16rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 30rpx;\n  color: #1890ff;\n  \n  .icon { font-size: 48rpx; margin-bottom: 10rpx; }\n  .text { font-size: 24rpx; }\n}\n\n.address-item {\n  background: #fff;\n  border-radius: 16rpx;\n  padding: 24rpx;\n  margin-bottom: 20rpx;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  \n  .location { font-weight: bold; font-size: 30rpx; color: #333; margin-bottom: 8rpx; }\n  .contact { \n      font-size: 24rpx; \n      color: #999; \n      .gender { margin: 0 10rpx; }\n  }\n  \n  .actions {\n    display: flex;\n    align-items: center;\n    gap: 16rpx;\n    \n    .tag {\n      background: #e6f7ff;\n      color: #1890ff;\n      font-size: 20rpx;\n      padding: 4rpx 12rpx;\n      border-radius: 8rpx;\n    }\n    .edit-btn {\n        padding: 10rpx;\n    }\n    .edit-icon { color: #999; }\n  }\n}\n\n.add-btn {\n  border: 2px dashed #ddd;\n  padding: 30rpx;\n  border-radius: 16rpx;\n  display: flex;\n  justify-content: center;\n  color: #999;\n  font-weight: bold;\n  background: #fff;\n}\n\n/* Edit Form Styles */\n.edit-form {\n    flex: 1;\n    padding: 30rpx;\n    background: #f5f5f5;\n}\n\n.form-group {\n    background: #fff;\n    border-radius: 16rpx;\n    padding: 0 24rpx;\n    margin-bottom: 40rpx;\n}\n\n.form-item {\n    display: flex;\n    align-items: center;\n    padding: 30rpx 0;\n    border-bottom: 1px solid #f5f5f5;\n    \n    &:last-child { border-bottom: none; }\n    \n    .label {\n        width: 120rpx;\n        font-size: 28rpx;\n        color: #333;\n        font-weight: bold;\n    }\n    \n    .input {\n        flex: 1;\n        font-size: 28rpx;\n        color: #333;\n    }\n    \n    .arrow { color: #ccc; }\n}\n\n.tags-row {\n    display: flex;\n    gap: 20rpx;\n    \n    .radio-tag {\n        border: 1px solid #ddd;\n        padding: 8rpx 30rpx;\n        border-radius: 8rpx;\n        font-size: 24rpx;\n        color: #666;\n        \n        &.active {\n            background: #fff5e6;\n            border-color: #ff6600;\n            color: #ff6600;\n        }\n    }\n}\n\n.save-btn {\n    background: #ff6600;\n    color: #fff;\n    border-radius: 50rpx;\n    font-size: 32rpx;\n    font-weight: bold;\n}\n</style>\n","import Component from 'E:/vue/Â•∂Ëå∂Â∞èÁ®ãÂ∫è/components/AddressModal.vue'\nwx.createComponent(Component)"],"names":["ref","reactive","globalApi","uni","onMounted","watch","api"],"mappings":";;;;;;;;;;;;;;;;;AAyFA,UAAM,QAAQ;AAOd,UAAM,OAAO;AAEb,UAAM,YAAYA,cAAAA,IAAI,CAAA,CAAE;AACxB,UAAM,YAAYA,cAAAA,IAAI,KAAK;AAC3B,UAAM,WAAWC,cAAAA,SAAS;AAAA,MACtB,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,KAAK;AAAA,IACT,CAAC;AAED,UAAM,gBAAgB,YAAY;AAChCC,0BAAAA,UAAU,WAAW,EAAE,IAAI,MAAM,EAAE,QAAQ,UAAU,KAAK,GAAI,GAAE,CAAC,QAAQ;AACvEC,sBAAAA,MAAA,MAAA,OAAA,sCAAY,GAAG;AACf,kBAAU,QAAQ;AAAA,MACnB,GAAE,CAAC,QAAQ;AACVA,4BAAI,UAAU,EAAE,OAAO,IAAI,OAAO,UAAU,MAAM,OAAM,CAAE;AAAA,MAC9D,CAAG;AAAA,IACH;AAEAC,kBAAS,UAAC,aAAa;AAGvBC,kBAAK,MAAC,MAAM,MAAM,SAAS,CAAC,QAAQ;AAChC,UAAI;AAAK;IACb,CAAC;AAED,UAAM,aAAa,MAAM;AACrB,UAAI,UAAU,OAAO;AACjB,kBAAU,QAAQ;AAAA,MAC1B,OAAW;AACH,aAAK,kBAAkB,KAAK;AAAA,MAC/B;AAAA,IACL;AAEA,UAAM,aAAa,MAAM;AACrB,aAAO,OAAO,UAAU,EAAE,IAAI,MAAM,MAAM,IAAI,QAAQ,GAAG,OAAO,IAAI,UAAU,IAAI,QAAQ,IAAI,KAAK,GAAE,CAAE;AACvG,gBAAU,QAAQ;AAAA,IACtB;AAEA,UAAM,cAAc,CAAC,SAAS;AAC1B,aAAO,OAAO,UAAU,IAAI;AAC5B,gBAAU,QAAQ;AAAA,IACtB;AAEA,UAAM,gBAAgB,CAAC,SAAS;AAC5BF,oBAAA,MAAA,MAAA,OAAA,sCAAY,oBAAoB,IAAI;AACpCA,oBAAA,MAAA,MAAA,OAAA,sCAAY,iBAAiB,MAAM,IAAI;AACvC,UAAI,MAAM,SAAS,UAAU;AACzB,aAAK,UAAU,IAAI;AACnB,aAAK,kBAAkB,KAAK;AAAA,MAC/B;AAAA,IACL;AAEA,UAAM,aAAa,YAAY;AAC3B,UAAI,CAAC,SAAS,QAAQ,CAAC,SAAS,SAAS,CAAC,SAAS,YAAY,CAAC,SAAS,QAAQ;AAC7EA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAM,CAAE;AAChD;AAAA,MACH;AAEDA,oBAAAA,MAAI,YAAY,EAAE,OAAO,MAAO,CAAA;AAChC,YAAMG,SAAG,IAAC,YAAY,QAAQ;AAC9BH,oBAAG,MAAC,YAAW;AAEf,YAAM,cAAa;AACnB,gBAAU,QAAQ;AAClBA,oBAAAA,MAAI,UAAU,EAAE,OAAO,OAAQ,CAAA;AAAA,IACnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrKA,GAAG,gBAAgB,SAAS;"}